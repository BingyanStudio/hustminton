# 华科羽毛球约球小程序

一个基于微信小程序和云开发的羽毛球约球平台，专为华中科技大学羽毛球爱好者设计。

## 📱 项目简介

华科羽毛球约球小程序是一个功能完整的约球平台，支持用户发布约球活动、参与他人活动、管理个人信息等功能。采用微信小程序原生开发，结合微信云开发提供稳定可靠的后端服务。

## ✨ 主要功能

### 🏸 核心功能
- **约球发布**：用户可以发布羽毛球约球活动，设置时间、地点、项目、等级等信息
- **活动参与**：浏览并加入感兴趣的约球活动
- **活动管理**：查看和管理自己发布的活动，编辑活动信息
- **参与记录**：查看自己参与的所有活动，支持退出功能

### 👤 用户系统
- **微信登录**：一键微信授权登录
- **个人资料**：完善个人信息（昵称、性别、年龄、等级、联系方式）
- **头像上传**：支持自定义头像上传和裁剪
- **用户信息展示**：点击头像查看其他用户详细信息

### 🔔 通知系统
- **实时通知**：活动参与者变化时实时通知发布者
- **红点提醒**：未读通知在相应页面显示红点提醒
- **通知管理**：支持标记通知为已读

### 🎨 界面特色
- **现代化设计**：采用卡片式设计，界面简洁美观
- **响应式布局**：适配不同尺寸的手机屏幕
- **交互友好**：丰富的动画效果和用户反馈
- **筛选功能**：支持按时间、地点、项目、等级筛选活动

## 🏗️ 技术架构

### 前端技术
- **框架**：微信小程序原生开发
- **样式**：WXSS + Flexbox布局
- **组件**：自定义组件 + 微信原生组件
- **状态管理**：页面级状态管理

### 后端技术
- **云开发**：微信云开发平台
- **数据库**：云数据库（NoSQL）
- **云函数**：Node.js云函数
- **云存储**：微信云存储

### 数据库设计
- **matches**：约球活动信息
- **users**：用户信息
- **notifications**：通知信息

## 📁 项目结构

```
miniprogram-4/
├── miniprogram/                 # 小程序前端代码
│   ├── pages/                   # 页面文件
│   │   ├── index/              # 首页（活动列表）
│   │   ├── publish/            # 发布活动页面
│   │   ├── profile/            # 个人中心页面
│   │   ├── my-joined/          # 我参与的活动
│   │   ├── my-published/       # 我发布的活动
│   │   ├── republish/          # 编辑活动页面
│   │   ├── login/              # 登录页面
│   │   └── crop/               # 头像裁剪页面
│   ├── components/             # 自定义组件
│   ├── utils/                  # 工具类
│   │   └── cloud.js           # 云开发工具类
│   ├── images/                 # 图片资源
│   ├── app.js                  # 小程序入口文件
│   ├── app.json               # 小程序配置文件
│   └── app.wxss               # 全局样式文件
├── cloudfunctions/             # 云函数代码
│   ├── publish/               # 发布活动云函数
│   ├── join/                  # 加入活动云函数
│   ├── quit/                  # 退出活动云函数
│   ├── getMatchList/          # 获取活动列表云函数
│   ├── getMyJoined/           # 获取我参与的活动云函数
│   ├── getMyPublished/        # 获取我发布的活动云函数
│   ├── checkNotifications/    # 检查通知云函数
│   ├── markNotificationsRead/ # 标记通知已读云函数
│   ├── update/                # 更新活动云函数
│   ├── delete/                # 删除活动云函数
│   ├── user-uploadAvatar/     # 头像上传云函数
│   ├── initCollections/       # 初始化数据库集合云函数
│   └── quickstartFunctions/   # 综合功能云函数
└── project.config.json        # 项目配置文件
```

## 🚀 快速开始

### 环境要求
- 微信开发者工具
- 微信小程序账号
- 微信云开发环境

### 安装步骤

1. **克隆项目**
   ```bash
   git clone [项目地址]
   cd miniprogram-4
   ```

2. **配置云开发环境**
   - 在微信开发者工具中打开项目
   - 开通云开发服务
   - 修改 `miniprogram/app.js` 和相关文件中的环境ID

3. **部署云函数**
   - 在微信开发者工具中右键各个云函数文件夹
   - 选择"上传并部署：云端安装依赖"

4. **初始化数据库**
   - 调用 `initCollections` 云函数创建数据库集合
   - 或在云开发控制台手动创建集合

5. **配置云存储**
   - 在云开发控制台配置存储权限
   - 上传默认头像等静态资源

### 配置说明

1. **修改环境ID**
   ```javascript
   // miniprogram/app.js
   env: "your-cloud-env-id"

   // miniprogram/utils/cloud.js
   env: "your-cloud-env-id"
   ```

2. **配置小程序信息**
   ```json
   // project.config.json
   "appid": "your-appid"
   ```

## 📖 使用说明

### 用户操作流程

1. **首次使用**
   - 微信授权登录
   - 完善个人信息（昵称、性别、年龄、等级、联系方式）

2. **发布活动**
   - 点击底部"发布"按钮
   - 填写活动信息（时间、地点、项目、等级、人数等）
   - 提交发布

3. **参与活动**
   - 在首页浏览活动列表
   - 使用筛选功能查找合适的活动
   - 点击"展开"查看详情，点击"加入"参与活动

4. **管理活动**
   - 在"我的"页面查看"我发布的"和"我参加的"活动
   - 支持编辑、删除自己发布的活动
   - 支持退出参与的活动

### 管理员功能
- 通过云开发控制台管理数据库
- 查看用户反馈信息
- 监控系统运行状态

## 🔧 开发指南

### 添加新功能
1. 在 `miniprogram/pages/` 下创建新页面
2. 在 `cloudfunctions/` 下创建对应云函数
3. 在 `miniprogram/utils/cloud.js` 中添加API接口
4. 更新 `miniprogram/app.json` 配置

### 数据库操作
- 使用云函数进行数据库操作
- 遵循最小权限原则
- 添加适当的数据验证

### 样式开发
- 使用 rpx 单位适配不同屏幕
- 遵循微信小程序设计规范
- 保持界面一致性

## 🐛 常见问题

### 部署问题
1. **云函数部署失败**
   - 检查网络连接
   - 确认云开发环境已开通
   - 重新安装依赖

2. **数据库连接失败**
   - 检查环境ID配置
   - 确认数据库集合已创建
   - 检查权限设置

### 功能问题
1. **登录失败**
   - 检查小程序AppID配置
   - 确认用户授权
   - 查看云函数日志

2. **图片上传失败**
   - 检查云存储权限
   - 确认文件大小限制
   - 查看网络状态

3. **活动列表为空**
   - 确认数据库集合名称正确（matches）
   - 检查云函数权限配置
   - 查看控制台错误信息

## 📊 核心云函数说明

### 用户相关
- `quickstartFunctions`：综合用户功能（登录、更新信息、反馈等）
- `user-uploadAvatar`：头像上传处理

### 活动相关
- `publish`：发布新的约球活动
- `join`：加入约球活动
- `quit`：退出约球活动
- `update`：更新活动信息
- `delete`：删除活动
- `getMatchList`：获取活动列表（支持筛选）
- `getMyJoined`：获取用户参与的活动
- `getMyPublished`：获取用户发布的活动

### 通知相关
- `checkNotifications`：检查未读通知数量
- `markNotificationsRead`：标记通知为已读

### 系统相关
- `initCollections`：初始化数据库集合

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进项目！

### 贡献指南
1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 项目 Issues
- 小程序内意见反馈功能

## 🎯 未来规划

- [ ] 添加活动评价功能
- [ ] 支持活动分享
- [ ] 增加积分系统
- [ ] 添加活动统计分析
- [ ] 支持多校区扩展

---

**华科羽毛球约球小程序** - 让约球变得更简单！ 🏸

